version: 4

description: |
  This setup creates special images for icc and machinist which have volume mounts
  mapped to local repositories. Essentially the same as running `cib dev`

  NOT FULLY IMPLEMENTED YET

cluster:
  k3d:
    nodes: 1

dependencies:
  prometheus-community/prometheus-adapter:
    plt_defaults: true
  prometheus-community/kube-prometheus-stack:
    plt_defaults: true
  bitnamicharts/postgresql:
    plt_defaults: true
  bitnamicharts/valkey:
    plt_defaults: true
  local/traefik:
    plt_defaults: false

platformatic:
  icc:
    hotReload: true
    local:
      path: "{{ ICC_REPO }}"
  machinst:
    hotReload: true
    local:
      path: "{{ MACHINIST_REPO }}"
