# This is a configuration profile which uses prebuilt images. This is most like
# running `cib demo`.

# Configuration version
version: 3

# Define the cluster provider and any relevant details
# When the cluster is created, it will be named after this file: plt-example
cluster:
  # This is the cluster provider key
  k3d:
    nodes: 1

# Define the charts to be installed in your cluster
dependencies:
  prometheus-community/prometheus-adapter:
    # When set to false, the _overrides.yaml_ file in the chart directory is
    # ignored
    plt_defaults: true
  prometheus-community/kube-prometheus-stack:
    plt_defaults: true
  bitnamicharts/postgresql:
    plt_defaults: true
  bitnamicharts/valkey:
    plt_defaults: true
  local/traefik:
    plt_defaults: false

# Define what Platformatic applications to deploy and where they are sourced from
# This matches the v4 Helm chart values.yaml
platformatic:
  github:
    registry: ghcr.io
    username: "{{ PULL_SECRET_USER }}"
    imagePullSecret: "{{PULL_SECRET_TOKEN}}"

  projects:
    icc:
      image:
        tag: "v2.1.3"
        repository: "ghcr.io/platformatic/plt-icc-3"
      path: 'lolol'
      overrides:
        env: {}
        secrets: {}

    machinist:
      image:
        tag: "v2.0.0"
        repository: "ghcr.io/platformatic/plt-machinist-3"
      path: 'lolo'
      overrides:
        env: {}
        secrets: {}
