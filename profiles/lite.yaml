version: 4

description: |
  This profile creates a cluster with all the dependencies needed for running Platformatic
  but does not install icc or machinist. This is useful for testing the icc install
  scripts.

cluster:
  k3d:
    nodes: 1

dependencies:
  prometheus-community/prometheus-adapter:
    plt_defaults: true
  prometheus-community/kube-prometheus-stack:
    plt_defaults: true
  cloudpirates/postgres:
    plt_defaults: true
  cloudpirates/valkey:
    plt_defaults: true
  local/traefik:
    plt_defaults: false
  # Uncomment to enable Kafka (optional)
  # local/kafka:
  #   plt_defaults: true

platformatic:
  skip: true
